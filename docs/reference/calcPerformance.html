<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="If calcExternalPerformance is used, such as when having a vector of
known classes and a vector of predicted classes determined outside of the
ClassifyR package, a single metric value is calculated. If
calcCVperformance is used, annotates the results of calling
crossValidate, runTests or runTest with one of the user-specified performance measures."><title>Add Performance Calculations to a ClassifyResult Object or Calculate for a
Pair of Factor Vectors — calcExternalPerformance • ClassifyR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add Performance Calculations to a ClassifyResult Object or Calculate for a
Pair of Factor Vectors — calcExternalPerformance"><meta property="og:description" content="If calcExternalPerformance is used, such as when having a vector of
known classes and a vector of predicted classes determined outside of the
ClassifyR package, a single metric value is calculated. If
calcCVperformance is used, annotates the results of calling
crossValidate, runTests or runTest with one of the user-specified performance measures."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ClassifyR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.3.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/ClassifyR.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Add Performance Calculations to a ClassifyResult Object or Calculate for a
Pair of Factor Vectors</h1>
      
      <div class="d-none name"><code>calcPerformance.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>If <code>calcExternalPerformance</code> is used, such as when having a vector of
known classes and a vector of predicted classes determined outside of the
ClassifyR package, a single metric value is calculated. If
<code>calcCVperformance</code> is used, annotates the results of calling
<code><a href="crossValidate.html">crossValidate</a></code>, <code><a href="runTests.html">runTests</a></code> or <code><a href="runTest.html">runTest</a></code> with one of the user-specified performance measures.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for factor,factor</span></span>
<span><span class="fu">calcExternalPerformance</span><span class="op">(</span></span>
<span>  <span class="va">actualOutcome</span>,</span>
<span>  <span class="va">predictedOutcome</span>,</span>
<span>  performanceType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Balanced Accuracy"</span>, <span class="st">"Balanced Error"</span>, <span class="st">"Error"</span>, <span class="st">"Accuracy"</span>,</span>
<span>    <span class="st">"Sample Error"</span>, <span class="st">"Sample Accuracy"</span>, <span class="st">"Micro Precision"</span>, <span class="st">"Micro Recall"</span>, <span class="st">"Micro F1"</span>,</span>
<span>    <span class="st">"Macro Precision"</span>, <span class="st">"Macro Recall"</span>, <span class="st">"Macro F1"</span>, <span class="st">"Matthews Correlation Coefficient"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for Surv,numeric</span></span>
<span><span class="fu">calcExternalPerformance</span><span class="op">(</span></span>
<span>  <span class="va">actualOutcome</span>,</span>
<span>  <span class="va">predictedOutcome</span>,</span>
<span>  performanceType <span class="op">=</span> <span class="st">"C-index"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ClassifyResult</span></span>
<span><span class="fu">calcCVperformance</span><span class="op">(</span></span>
<span>  <span class="va">result</span>,</span>
<span>  performanceType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Balanced Accuracy"</span>, <span class="st">"Balanced Error"</span>, <span class="st">"Error"</span>, <span class="st">"Accuracy"</span>,</span>
<span>    <span class="st">"Sample Error"</span>, <span class="st">"Sample Accuracy"</span>, <span class="st">"Micro Precision"</span>, <span class="st">"Micro Recall"</span>, <span class="st">"Micro F1"</span>,</span>
<span>    <span class="st">"Macro Precision"</span>, <span class="st">"Macro Recall"</span>, <span class="st">"Macro F1"</span>, <span class="st">"Matthews Correlation Coefficient"</span>,</span>
<span>    <span class="st">"AUC"</span>, <span class="st">"C-index"</span>, <span class="st">"Sample C-index"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>actualOutcome</dt>
<dd><p>A factor vector or survival information specifying each sample's known outcome.</p></dd>


<dt>predictedOutcome</dt>
<dd><p>A factor vector or survival information of the same length as <code>actualOutcome</code> specifying each sample's predicted outcome.</p></dd>


<dt>performanceType</dt>
<dd><p>A character vector of length 1. Default: <code>"Balanced Accuracy"</code>.
Must be one of the following options:</p><ul><li><p><code>"Error"</code>: Ordinary error rate.</p></li>
<li><p><code>"Accuracy"</code>: Ordinary accuracy.</p></li>
<li><p><code>"Balanced Error"</code>: Balanced error rate.</p></li>
<li><p><code>"Balanced Accuracy"</code>: Balanced accuracy.</p></li>
<li><p><code>"Sample Error"</code>: Error rate for each sample in the data set.</p></li>
<li><p><code>"Sample Accuracy"</code>: Accuracy for each sample in the data set.</p></li>
<li><p><code>"Micro Precision"</code>: Sum of the number of correct predictions in
        each class, divided by the sum of number of samples in each class.</p></li>
<li><p><code>"Micro Recall"</code>: Sum of the number of correct predictions in each 
        class, divided by the sum of number of samples predicted as
        belonging to each class.</p></li>
<li><p><code>"Micro F1"</code>: F1 score obtained by calculating the
harmonic mean of micro precision and micro recall.</p></li>
<li><p><code>"Macro Precision"</code>: Sum of the ratios of the number of correct predictions
in each class to the number of samples in each class, divided by the number of classes.</p></li>
<li><p><code>"Macro Recall"</code>: Sum of the ratios of the number of correct predictions in each
class to the number of samples predicted to be in each class, divided by the number of classes.</p></li>
<li><p><code>"Macro F1"</code>: F1 score obtained by calculating the harmonic mean of macro precision
and macro recall.</p></li>
<li><p><code>"Matthews Correlation Coefficient"</code>: Matthews Correlation Coefficient (MCC). A score
between -1 and 1 indicating how concordant the predicted classes are to the actual classes. Only defined if
there are two classes.</p></li>
<li><p><code>"AUC"</code>: Area Under the Curve. An area ranging from 0 to 1, under the ROC.</p></li>
<li><p><code>"C-index"</code>: For survival data, the concordance index, for models which produce risk scores. Ranges from 0 to 1.</p></li>
<li><p><code>"Sample C-index"</code>: Per-individual C-index.</p></li>
</ul></dd>


<dt>result</dt>
<dd><p>An object of class <code><a href="ClassifyResult-class.html">ClassifyResult</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>If <code>calcCVperformance</code> was run, an updated
<code><a href="ClassifyResult-class.html">ClassifyResult</a></code> object, with new metric values in the
<code>performance</code> slot. If <code>calcExternalPerformance</code> was run, the
performance metric value itself.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>All metrics except Matthews Correlation Coefficient are suitable for
evaluating classification scenarios with more than two classes and are
reimplementations of those available from Intel DAAL.</p>
<p><code><a href="crossValidate.html">crossValidate</a></code>, <code><a href="runTests.html">runTests</a></code> or <code><a href="runTest.html">runTest</a></code> was run in resampling mode, one performance
measure is produced for every resampling. Otherwise, if the leave-k-out mode was used,
then the predictions are concatenated, and one performance measure is
calculated for all classifications.</p>
<p><code>"Balanced Error"</code> calculates the balanced error rate and is better
suited to class-imbalanced data sets than the ordinary error rate specified
by <code>"Error"</code>. <code>"Sample Error"</code> calculates the error rate of each
sample individually. This may help to identify which samples are
contributing the most to the overall error rate and check them for
confounding factors. Precision, recall and F1 score have micro and macro
summary versions. The macro versions are preferable because the metric will
not have a good score if there is substantial class imbalance and the
classifier predicts all samples as belonging to the majority class.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Dario Strbenac</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">predictTable</span> <span class="op">&lt;-</span> <span class="fu">DataFrame</span><span class="op">(</span>sample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, sep <span class="op">=</span> <span class="st">''</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, <span class="fl">50</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">actual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>                             </span></span>
<span class="r-in"><span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="ClassifyResult-class.html">ClassifyResult</a></span><span class="op">(</span><span class="fu">DataFrame</span><span class="op">(</span>characteristic <span class="op">=</span> <span class="st">"Data Set"</span>, value <span class="op">=</span> <span class="st">"Example"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                           <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, sep <span class="op">=</span> <span class="st">''</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Gene"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Gene"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Gene"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Gene"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Gene"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                           <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">oracle</span><span class="op">)</span><span class="op">{</span><span class="op">}</span><span class="op">)</span>, <span class="cn">NULL</span>, <span class="va">predictTable</span>, <span class="va">actual</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">calcCVperformance</span><span class="op">(</span><span class="va">result</span><span class="op">)</span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="ClassifyResult-class.html">performance</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`Balanced Accuracy`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.6166667 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Dario Strbenac, Ellis Patrick, Sourish Iyengar, Harry Robertson, Andy Tran, John Ormerod, Graham Mann, Jean Yang.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

